{
    "name": "musupport",
    "displayName": "MuSupport",
    "description": "Language support for files in Project Mu",
    "repository": "https://github.com/matthewfcarlson/musupport/",
    "version": "0.0.5",
    "license": "CC-BY-NC-SA-4.0",
    "engines": {
        "vscode": "^1.29.0"
    },
    "publisher": "Microsoft",
    "categories": [
        "Programming Languages",
        "Linters"
    ],
    "extensionDependencies": [
        "ms-vscode.cpptools",
        "ms-python.python"
    ],
    "extensionPack": [
        "thog.vscode-asl"
    ],
    "activationEvents": [
        "workspaceContains:Build/BUILDLOG.txt",
        "onLanguage:c",
        "onLanguage:h",
        "onLanguage:cpp",
        "onLanguage:inf",
        "onLanguage:dsc",
        "onLanguage:dec",
        "onCommand:musupport.*"
    ],
    "main": "./out/main.js",
    "contributes": {
        "commands": [
            {
                "command": "extension.helloWorld",
                "title": "Hello World"
            },
            {
                "command": "musupport.selectPackage",
                "title": "Select DSC Package",
                "category": "Mu Support"
            },
            {
                "command": "musupport.refreshPackages",
                "title": "Refresh DSC Packages",
                "category": "Mu Support"
            },
            {
                "command": "musupport.update",
                "title": "Update Platform",
                "category": "Mu Support"
            },
            {
                "command": "musupport.install_corebuild",
                "title": "Install Mu Build Environment",
                "category": "Mu Support"
            },
            {
                "command": "musupport.scan",
                "title": "Scan Repository",
                "category": "Mu Support"
            }
        ],
        "configuration": {
            "type": "object",
            "title": "Mu Support configuration",
            "properties": {
                "musupport.useAsCppProvider": {
                    "type": "boolean",
                    "default": false,
                    "description": "Provides a Cpp Provider to the system."
                },
                "musupport.platformDsc": {
                    "type": "string",
                    "default": "PlatformPkg.dsc",
                    "description": "A glob to use to locate the platform build DSC for any projects in the workspace",
                    "scope": "resource"
                },
                "musupport.platformBuildScript": {
                    "type": "string",
                    "default": "PlatformBuild.py",
                    "description": "A glob to use to locate the platform build script for any projects in the workspace",
                    "scope": "resource"
                },
                "musupport.platformBuildScriptArgs": {
                    "type": "array",
                    "description": "Arguments to pass to the platform build script",
                    "default": [
                        "Profile=${config}",
                        "LaunchLogOnSuccess=FALSE",
                        "LaunchLogOnError=FALSE",
                        "--VERBOSE",
                        "BUILDCAPSULE=TRUE"
                    ],
                    "scope": "resource"
                },
                "musupport.currentPlatformBuildScriptPath": {
                    "type": "string",
                    "description": "(Generated automatically) Path to the active platform build script",
                    "scope": "resource"
                },
                "musupport.currentPlatform": {
                    "type": "string",
                    "description": "(Generated automatically) The active platform currently selected",
                    "scope": "resource"
                }
            }
        },
        "taskDefinitions": [
            {
                "type": "uefi-corebuild",
                "required": [
                    "task"
                ],
                "properties": {
                    "task": {
                        "type": "string",
                        "description": "The action to perform"
                    },
                    "profile": {
                        "type": "string",
                        "description": "The project profile to build"
                    }
                }
            }
        ],
        "problemMatchers": [
            {
                "name": "mu-build",
                "label": "MuBuild Errors",
                "owner": "cpp",
                "fileLocation": ["absolute"],
                "pattern": [
                    {
                        "kind": "file",
                        "regexp": "^INFO -  : (error) (F\\d+): (.+)$",
                        "severity": 1,
                        "message": 2,
                        "code": 3
                    },
                    {
                        "kind": "file",
                        "regexp": "^INFO -  (.+) (?:\\[.+\\])?$",
                        "file": 1
                    }
                ]
            },
            {
                "name": "mu-build-linker",
                "label": "MuBuild Linker Errors",
                "owner": "cpp",
                "fileLocation": ["absolute"],
                "pattern": {
                    "kind": "file",
                    "regexp": "^(?:ERROR|WARNING) - Linker: (?:Error|Warning): ([^(]+).+ : (error|warning) (.*)$",
                    "file": 1,
                    "severity": 2,
                    "message": 3
                }
            },
            {
                "name": "mu-build-compile",
                "label": "MuBuild Compiler Errors",
                "owner": "cpp",
                "fileLocation": ["absolute"],
                "pattern": {
                    "regexp": "^(?:ERROR|WARNING) - Compile: (?:Error|Warning): ([^(]+)\\((\\d+)\\): (error|warning) (\\w+): (.*)$",
                    "file": 1,
                    "line": 2,
                    "severity": 3,
                    "code": 4,
                    "message": 5
                }
            },
            {
                "name": "mu-build-binoutput",
                "label": "MuBuild Binary Output",
                "owner": "cpp",
                "fileLocation": ["absolute"],
                "pattern": {
                    "kind": "file",
                    "regexp": "^(INFO) - (Full Flash image written to (.*))$",
                    "severity": 1,
                    "message": 2,
                    "file": 3
                }
            }
        ],
        "languages": [
            {
                "id": "dsc",
                "aliases": [
                    "UEFI Project Descriptor File",
                    "DSC",
                    "dsc"
                ],
                "extensions": [
                    ".dsc"
                ],
                "configuration": "./dsc-language-configuration.json"
            },
            {
                "id": "fdf",
                "aliases": [
                    "UEFI Flash Descriptor File",
                    "FDF",
                    "fdf"
                ],
                "extensions": [
                    ".fdf"
                ],
                "configuration": "./fdf-language-configuration.json"
            },
            {
                "id": "dec",
                "aliases": [
                    "UEFI Project Declaration File",
                    "DEC",
                    "dec"
                ],
                "extensions": [
                    ".dec"
                ],
                "configuration": "./dec-language-configuration.json"
            },
            {
                "id": "inf",
                "aliases": [
                    "UEFI INF Package",
                    "INF",
                    "inf"
                ],
                "extensions": [
                    ".inf"
                ],
                "configuration": "./inf-language-configuration.json"
            }
        ],
        "grammars": [
            {
                "language": "dsc",
                "scopeName": "source.dsc",
                "path": "./syntaxes/dsc.tmLanguage.json"
            },
            {
                "language": "dec",
                "scopeName": "source.dec",
                "path": "./syntaxes/dec.tmLanguage.json"
            },
            {
                "language": "fdf",
                "scopeName": "source.fdf",
                "path": "./syntaxes/fdf.tmLanguage.json"
            },
            {
                "language": "inf",
                "scopeName": "source.inf",
                "path": "./syntaxes/inf.tmLanguage.json"
            }
        ]
    },
    "scripts": {
        "update-vscode": "node ./node_modules/vscode/bin/install",
        "postinstall": "node ./node_modules/vscode/bin/install",
        "vscode:prepublish": "npm run compile",
        "build": "npm run compile",
        "compile": "tsc -p ./",
        "watch": "tsc -watch -p ./",
        "package": "vsce package",
        "install": "code --install-extension release/musupport-0.0.5.vsix"
    },
    "devDependencies": {
        "@types/node": "^8.10.51",
        "tslint": "^5.18.0",
        "typescript": "^2.6.1",
        "typings": "^2.1.1",
        "vsce": "1.65.0",
        "vscode": "^1.1.35"
    },
    "dependencies": {
        "@types/glob": "^7.1.1",
        "glob": "^7.1.4",
        "http-proxy-agent": ">=2.1.0",
        "https-proxy-agent": "^2.2.2",
        "jsonc-parser": "^2.1.0",
        "logform": "^1.10.0",
        "mkdirp": "^0.5.1",
        "ncp": "^2.0.0",
        "node-fetch": "^2.6.0",
        "triple-beam": "^1.3.0",
        "vscode-cpptools": "2.1.2",
        "vscode-jsonrpc": "^4.0.0",
        "winston": "^3.2.1",
        "winston-transport": "^4.2.0",
        "xml2js": "^0.4.19"
    }
}
